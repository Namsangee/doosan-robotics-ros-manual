.. _aux_control_services:

aux_control Services
====================

.. contents::
   :depth: 1
   :local:
   
GetControlMode
--------------

This service returns the current control mode.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   int8    control_mode        # Control mode : Position control mode(3), Torque control mode(4)
   bool    success 

GetControlSpace
---------------

This service returns the current control space.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   int8    space        # Control mode : Joint space control(1), Task space control(2)
   bool    success

GetCurrentPosj
--------------

This service returns the current joint angle.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   float64[6] pos               # joint pos(posj)  
   bool       success

GetCurrentPosx
--------------

This service returns the pose and solution space of the current coordinate system. The pose is based on the ref coordinate.

**Request:**

.. code-block::

   int8       ref               # DR_BASE(0), DR_WORLD(2), user coord(101~200)
                                # <ref is only available in M2.40 or later> 

**Response:**

.. code-block::

   std_msgs/Float64MultiArray[] task_pos_info  # task pos = task_pos_info[0][0:5], solution sapce = task_pos_info[0][6]
   bool        success   

GetCurrentRotm
--------------

This serivce returns the direction and matrix of the current tool based on the ref coordinate.

**Request:**

.. code-block::

   int8        ref               # DR_BASE(0), DR_WORLD(2)

**Response:**

.. code-block::

   std_msgs/Float64MultiArray[] rot_matrix  # target[3][3] Rotation matrix
   bool        success

GetCurrentSolutionSpace
-----------------------

This service returns the current solution space value.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   int8        sol_space         # solution space : 0 ~ 7
   bool        success

GetCurrentToolFlangePosx
------------------------

This service returns the pose of the current tool flange based on the ref coordinate. In other words, it means the return to tcp=(0,0,0,0,0,0).

**Request:**

.. code-block::

   int8        ref               # DR_BASE(0), DR_WORLD(2)

**Response:**

.. code-block::

   float64[6]  pos               # Pose of tool flange(posx) 
   bool        success

GetCurrentVelj
--------------

This service returns the current target joint velocity. It cannot be used in the movel, movec, movesx, moveb, move_spiral, or move_periodic command.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   float64[6]  joint_speed               # joint speed 
   bool        success

GetCurrentVelx
--------------

This service returns the current tool velocity based on the ref coordinate.

**Request:**

.. code-block::

   int8       ref               # DR_BASE(0), DR_WORLD(2)

**Response:**

.. code-block::

   float64[6] vel               # Tool velocity
   bool       success

GetDesiredPosj
--------------

This service returns the current target joint angle.
It cannot be used in the movel, movec, movesx, moveb, move_spiral, or move_periodic service.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   float64[6] pos               # joint pos(posj)  
   bool       success

GetDesiredPosx
--------------

This service returns the target pose of the current tool. The pose is based on the ref coordinate.

**Request:**

.. code-block::

   int8       ref        # DR_BASE(0), DR_WORLD(2), user coord(101~200)
                         # <ref is only available in M2.40 or later> 

**Response:**

.. code-block::

   float64[6] pos               # task pos(posx)
   bool       success

GetDesiredVelj
--------------
This service returns the current target joint velocity. 
It cannot be used in the movel, movec, movesx, moveb, move_spiral, or move_periodic command.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   float64[6] joint_vel               # Target joint velocity 
   bool       success

GetDesiredVelx
--------------

This service returns the target velocity of the current tool based on the ref coordinate. 
It cannot be used in the movej, movejx, or movesj service.

**Request:**

.. code-block::

   int8       ref               # DR_BASE(0), DR_WORLD(2)

**Response:**

.. code-block::

   float64[6] vel               # Tool velocity
   bool       success

GetExternalTorque
-----------------

This service returns the torque value generated by the external force on each current joint.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   float64[6] ext_torque       #Torque value generated by an external force
   bool       success

GetJointTorque
--------------

This service returns the sensor torque value of the current joint.

**Request:**

.. code-block::

   (None)

**Response:**

.. code-block::

   float64[6] jts         # value of JTS(Joint Torque Sensor) 
   bool       success

GetOrientationError
-------------------

This service returns the orientation error value between the arbitrary poses xd and xc of the axis.

**Request:**

.. code-block::

   float64[6] xd                # task pos(posx)  
   float64[6] xc                # task pos(posx)  
   int8       axis              # DR_AXIS_X(0), DR_AXIS_Y(1), DR_AXIS_Z(2) 

**Response:**

.. code-block::

   float32    ori_error         # orientation error  
   bool       success

GetSolutionSpace
----------------

This service obtains the solution space value.

**Request:**

.. code-block::

   float64[6] pos               # joint angle list [degree] 

**Response:**

.. code-block::

   int8       sol_space         # solution space : 0 ~ 7
   bool       success

GetToolForce
------------

This service returns the external force applied to the current tool based on the ref coordinate. 
The force is based on the base coordinate while the moment is based on the tool coordinate.

**Request:**

.. code-block::

   int8       ref               # DR_BASE(0), DR_WORLD(2)

**Response:**

.. code-block::

   float64[6] tool_force        # External force applied to the tool
   bool       success
